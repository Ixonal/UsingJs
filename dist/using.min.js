/*

UsingJs script loader and dependency tracker
Copyright 2013-2016 Benjamin McGregor (Ixonal)
Released under the MIT Licence
http://opensource.org/licenses/MIT
*/
(function(r){function M(a,b){z[a]||(z[a]=[]);z[a].push(b)}function E(a,b){var c=z[a];if(c)for(var e=0,f=c.length;e<f;e++)c[e].call(null,w({},b))}function w(a){if(1>=arguments.length)throw Error("At least an extender and extendee are required");var b=arguments[0],c,e,f,d;e=1;for(d=arguments.length;e<d;e++)if(c=arguments[e])for(f in c)b[f]=c[f];return b}function A(a){var b=arguments[0],c,e,f,d,g;if(!b||b.constructor!==N)throw Error("The mergee must be an array.");e=1;for(d=arguments.length;e<d;e++){c=
arguments[e];if(!c||c.constructor!==N)throw Error("The merger must be an array.");f=0;for(g=c.length;f<g;f++)b.push(c[f])}}function x(a,b){for(var c=0,e=a.length;c<e;c++)if(a[c]===b)return c;return-1}function F(a,b){for(var c=0,e=a.length;c<e;c++)if(a[c].matches(b))return c;return-1}function h(a,b){return null===a?"null":a===r?"undefined":"object"===typeof a?"[object Array]"===Object.prototype.toString.call(a)?b?"array":0<a.length?"array<"+h(a[0])+">":"array<object>":a.constructor===k.RegExp?"regexp":
a.constructor===k.Date?"date":a.src?"dependency":"object":typeof a}function O(a){g=w({},W,g,a);if(!g.browser){var b=w,c=g,e;e={name:"unknown",version:null};var f,d=3,p,y;if(k.navigator){if(f=X.exec(k.navigator.userAgent)){p=u.createElement("div");for(y=p.getElementsByTagName("i");p.innerHTML="\x3c!--[if gt IE "+ ++d+"]><i></i><![endif]--\x3e",y[0];);e.name="ie";e.version=4<d?d:+(f[2]||f[4])}else if(f=Y.exec(k.navigator.userAgent))e.name="cr",e.version=+f[1];else if(f=Z.exec(k.navigator.userAgent))e.name=
"ff",e.version=+f[1];else if(f=aa.exec(k.navigator.userAgent))e.name="sf",e.version=+f[1];e={browser:e}}else e={browser:e};b(c,e)}g.environment="undefined"!==typeof k.module&&this.module!==k.module?"nd":k.document?"wb":"ww";a:{d=u.getElementsByTagName("script");y=["using.js","using.min.js",g.srcName];var h,b=0;for(e=d.length;b<e;b++)for(p=d[b].src,c=0,f=y.length;c<f;c++)if((h=y[c])&&p.substr(p.length-h.length,h.length)===h){b=d[b];break a}b=null}var l,t,q,n;b&&(l=b.getAttribute("data-script-root")||
a&&a.scriptRoot||g.scriptRoot,t=b.getAttribute("data-style-root")||a&&a.styleRoot||g.styleRoot,q=b.getAttribute("data-using"),n=b.getAttribute("data-using-css"));(l=l||g.scriptRoot)&&"/"!==l.substr(l.length-1,1)&&(l+="/");g.scriptRoot=l||"/";t&&"/"!==t.substr(t.length-1,1)&&(t+="/");g.styleRoot=t||"/";q&&(g.initialUsing=k.eval("("+q+")"));n&&(g.initialStyleUsing=k.eval("("+n+")"))}function P(a){g.debug&&k.console&&k.console.warn(a)}function B(a){switch(h(a)){case "string":return ba.test(a)?"js":ca.test(a)?
"css":"js";case "dependency":return"<||page||>"===a.type||"<||usingContext||>"===a.type?"js":a.type||B(a.src)}}function Q(a){".css"!==a.substr(a.length-4,4)&&(a+=".css");return a}function C(a){var b;switch(h(a,!0)){case "string":a=Q(a);break;case "dependency":a.noExtension||(a.src=Q(a.src));a.type="css";break;case "array":for(b=a.length;b--;)a[b]=C(a[b])}return a}function R(){return"ie"===g.browser.name&&10>=g.browser.version}function da(a){if("object"!=typeof a)return!1;if(Object.keys)return 0===
Object.keys(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function S(a,b,c){b=b.split(/[\.\/\\]+/);var e,f;e=0;for(f=b.length-1;e<f;e++)a=a[b[e]]=a[b[e]]||{};a[b[b.length-1]]=c}function q(a,b,c,e,f,d,p){this.src=a;this.type=b||B(a);this.j=e;this.o=c;this.i=[];this.L=[];this.g=[];this.b=[];this.l={};this.K=p;f&&(this.name=f);this.C=d!==r?d:g.minified}function G(){if(!H){H=!0;for(var a=I.length;a--;)I[a]()}}function ea(){if(!J){J=!0;var a=g.pollingTimeout;setTimeout(function c(){H||
(l.N()?G():setTimeout(c,a));J=!1},a)}}function K(a,b,c,e){var f,m,p,k,n,r,t=l.empty();switch(h(a,!0)){case "function":d.S(a);return;case "string":case "dependency":case "array":f=T.u(a);break;default:throw Error("Valid dependencies must be entered");}p=[];e?n=e:t||v?n=l.I():R()?(n=l.ha())||(n=l.I()):"currentScript"in u&&((n=l.ga())||(n=l.I()));for(m=f.length;m--;){k=l.m(f[m]);if(!k){switch(h(f[m],!0)){case "string":r=!1;k=new q(f[m],B(f[m]),!1,null);break;case "dependency":r=f[m].dependsOn,k=new q(f[m].src,
B(f[m]),f[m].noExtension,f[m].backup,f[m].name,f[m].minified,f[m].exports)}l.O(k);r?function(){var a=k;K(f[m].dependsOn,function(){a.load()},null,a);a.H()}():k.H()}p.push(k)}if(n){for(m=p.length;m--;)n.J(p[m]),e&&p[m].w(b,p);b&&!e&&n.w(b,p);c&&(n.name=c)}else{a=new q("<||usingContext||>"+fa++,"<||usingContext||>",a.noExtension,a.backup,c,a.minified);l.O(a);for(m=p.length;m--;)a.J(p[m]);b&&a.w(b,p);c&&(a.name=c);t||v||R()||U.push(a)}"ie"===g.browser.name&&ea()}function d(a,b){K(a,b);return d}var k=
this||(0,eval)("this"),g=k.using?k.using.config:null,N=k.Array,W={noConflict:!1,scriptRoot:"/",styleRoot:"/",cached:!0,pollingTimeout:200,minified:!1,debug:!1},U=[],v=!1,u=k.document||{getElementsByTagName:function(){return[]}},X=/(MSIE\s*(\d+))|(rv:(\d+\.?\d*))/i,Y=/Chrome\/(\d+)/i,Z=/Firefox\/(\d+)/i,aa=/Safari\/(\d+)/i,ba=/\.((js)|(jscript))$/i,ca=/\.(css)$/i,V=/([a-zA-Z0-9\.]*:)?\/\/([^\/]+)\/?/,n={},D={},L={};n[8]=!0;n[5]=!0;n[6]=!0;n[9]=!0;D[4]=!0;D[7]=!0;D[8]=!0;L[7]=!0;L[8]=!0;var z={};O(g);
var T={map:{},m:function(a){var b,c,e=h(a,!0);for(b in this.map)for(c=this.map[b].length;c--;)switch(e){case "string":switch(h(this.map[b][c],!0)){case "string":if(this.map[b][c]===a)return this.map[b][c];break;case "dependency":if(this.map[b][c].src===a)return this.map[b][c]}break;case "dependency":switch(h(this.map[b][c],!0)){case "string":if(this.map[b][c]===a.src)return this.map[b][c];break;case "dependency":var f=this.map[b][c];if(f.src===a.src&&f.type===a.type&&f.conditionally===a.conditionally&&
f.dependsOn===a.dependsOn&&f.noExtension===a.noExtension&&f.backup===a.backup)return this.map[b][c]}}return null},X:function(a,b){if("string"!==h(a))throw Error("The alias must be a string.");var c;c=h(b,!0);var e;if(a===b)throw Error("Mapping to an equivalently named alias is not allowed.");if("dependency"===c&&a===b.src)throw Error("Mapping to an equivalently named alias is not allowed.");switch(c){case "array":e=[];for(c=b.length;c--;)A(e,this.u(b[c]));break;case "string":case "dependency":e=this.u(b);
break;default:throw Error("Unknown dependency type found");}this.map[a]=e;return this},u:function(a){var b=[],c,e;switch(h(a,!0)){case "string":if(this.map[a])for(c=0,e=this.map[a].length;c<e;c++)A(b,this.u(this.map[a][c]));else return[a];break;case "dependency":return a.conditionally===r||!0===a.conditionally?(b=this.u(a.src),0<b.length&&(1!==b.length||b[0]!==a.src)?b:[a]):b;case "array":if(0===a.length)return b;for(c=a.length;c--;)A(b,this.u(a[c]));0===b.length&&A(b,a);break;default:throw Error("Alias is not a recognized type.");
}return 0===b.length?[a]:b}};w(q.prototype,{src:null,j:null,v:!1,type:"js",o:!1,status:0,g:null,b:null,i:null,L:null,a:null,l:null,name:null,C:!1,K:null,Z:function(){if(6!==this.status){var a;for(a=this.g.length;a--;)this.g[a].matches(this)&&this.g.splice(a,1);for(a=this.b.length;a--;)this.b[a].matches(this)&&this.b.splice(a,1);delete this.g;delete this.b;delete this.i;delete this.a;delete this.a;delete this.src;delete this.j;delete this.v;delete this.type;this.status=6}},$:function(){var a;if(4===
this.status){this.status=7;for(a=this.b.length;a--;)8!==this.b[a].status&&this.b[a].s();this.M();this.status=8;E("dependency-status-terminal");for(a=this.g.length;a--;){var b=this.g[a];8!=b.status?b.s():b.M()}"<||page||>"!==this.type&&l.N()&&G()}},ja:function(a){switch(h(a,!0)){case "object":w(this.l,a);break;default:a&&(this.l=a)}},aa:function(a){var b,c,e={};a=a||this.b;for(b=a.length;b--;)if(c=a[b],da(c.l)){if(c.K){var f;a:{f=c.K.split(/[\.\/\\]+/);for(var d=k,g=void 0,h=void 0,g=0,h=f.length;g<
h;g++)if(d=d[f[g]],d===r){f=null;break a}f=d}S(e,c.name||c.src,f)}}else S(e,c.name||c.src,c.l);return e},s:function(){if(4===this.status||9===this.status)9===this.status?l.N()&&G():this.U()&&this.$()},P:function(a){var b,c=this.b.length;a=a||[];for(a.push(this);c--;)if(b=this.b[c],-1!==x(a,b)){if(g.debug){var e="Cyclic dependency found (non-terminal): \n",d;for(d=0;d<a.length;d++)e+=a[d]===b?"---\x3e":"    ",e+=(a[d].name||a[d].src)+"\n";e+="---\x3e"+(b.name||b.src);P(e)}}else if(!b.T())return!1;
return!0},U:function(a){return this.status in D&&this.P(a)},T:function(a){return this.status in L&&this.P(a)},J:function(a){if(!a||a.constructor!==q)throw Error("The other dependency must be a valid Dependency object.");this.matches(a)||(-1===F(this.b,a)&&(a.g.push(this),this.b.push(a)),4===a.status&&this.s())},M:function(a,b){a=(a||this.i).slice(0);b=(b||this.L).slice(0);if(this.U())for(var c,d,f;(c=a.pop())&&(d=b.pop());)f=c.call(null,this.aa(d),this.l),this.ja(f),c=x(this.i,c),-1<c&&this.i.splice(c,
1);else for(d=a.length;d--;)this.w(a[d])},w:function(a,b){if("function"!==h(a))throw Error("dependency resolution callback function must be a function.");this.T()?this.M([a],[b]):-1===x(this.i,a)&&(this.i.push(a),this.L.push(b))},matches:function(a){var b=h(a);return"string"===b?this.src===a:"dependency"===b?this.src===a.src&&this.type==a.type:!1},ia:function(a){if(!this.matches(a)){var b=F(this.b,a);0<=b&&this.b.splice(b,1);b=F(a.g,this);0<=b&&a.g.splice(b,1)}},resolve:function(){if(3===this.status){for(var a,
b,c;(b=U.shift())!==r;)if("<||usingContext||>"===b.type&&6!==b.status){b.name&&(this.name=b.name);b.o&&(this.o=b.o);b.C!==r&&(this.C=b.C);for(a=b.b.length;a--;)c=b.b[a],this.J(c),b.ia(c);for(a=b.i.length;a--;)this.w(b.i[a]);l.V(b)}this.status=4;this.s()}},error:function(a){var b,c;this.status=9;E("dependency-status-terminal");E("dependency-failed",{Y:this});b=this.v?this.j:this.src;"page"===b&&(b="page");"<||usingContext||>"===b&&(b="using context");c="UsingJs: An error has occurred when loading "+
b;a&&(b=a.v?a.j:a.src,"page"===b&&(b="page"),"<||usingContext||>"===b&&(b="using context"),c+=" - dependency "+b+" registered an error");g.debug&&k.console&&k.console.error(c);for(a=this.g.length;a--;)b=this.g[a],b.status in n||b.error(this);this.s()},W:function(){var a=""+(this.v?this.j:this.src),b=(new Date).getTime(),c;(c=a)?(V.lastIndex=0,c=(c=V.exec(c))?k.location?c[1]!==k.location.protocol||c[2]!==k.location.host:!0:!1):c=!1;if(c)return a+(g.cached?"":(-1===a.indexOf("?")?"?_t=":"&_t=")+b);
!this.o&&this.C&&-1===a.indexOf("min")&&(a+=".min");this.o||"<||usingContext||>"===this.type||"<||page||>"===this.type||a.substr(a.length-this.type.length)===this.type||(a+="."+this.type);"/"===a.substr(0,1)&&(a=a.substr(1));g.cached&&g.version&&(a+=(0<=a.indexOf("?")?"&":"?")+"_v="+encodeURIComponent(g.version));g.cached||(a+=(0<=a.indexOf("?")?"&":"?")+"_t="+b);switch(this.type){case "js":return g.scriptRoot+a;case "css":return g.styleRoot+a;default:return"/"+a}},load:function(){var a=this,b,c;
if(1===a.status){for(b=a.b.length;b--;){c=a.b[b];if(2===c.status||1===c.status)return;9===c.status&&c.error()}a.status=2;if("wb"==g.environment){if("js"===a.type)a.a=u.createElement("script"),a.a.setAttribute("src",a.W()),a.a.setAttribute("type","text/javascript"),a.a.setAttribute("defer","false"),a.a.setAttribute("async","true");else if("css"===a.type)a.a=u.createElement("link"),a.a.setAttribute("type","text/css"),a.a.setAttribute("href",a.W()),a.a.setAttribute("rel","stylesheet");else throw Error("Attempting to load an unsupported file type: "+
a.type);b=function(){a.j&&!a.v?(P("Error occurred while loading "+a.src+", attempting to load "+a.j),a.v=!0,a.status=1,a.load()):a.error()};a.a.addEventListener?(a.a.addEventListener("load",function(){a.status=3;a.resolve()},!0),a.a.addEventListener("error",b,!0)):"ie"===g.browser.name&&9>g.browser.version?(a.a.onreadystatechange=function(){if("complete"===a.a.readyState||"loaded"===a.a.readyState)a.a.onreadystatechange=null,a.status=3,a.resolve()},a.a.attachEvent&&a.a.attachEvent("onerror",b)):a.error("Unable to properly attach events with the current browser configuration.");
u.getElementsByTagName("head")[0].appendChild(a.a)}else throw Error("This functionality is not yet implemented");}},H:function(){0===this.status&&("<||usingContext||>"!==this.type&&"<||page||>"!==this.type?(this.status=1,this.load()):(this.status=4,this.s()))}});var l={c:{},D:0,ca:function(a){function b(a){var d=1,g,k=a.b.length,h;for(g=0;g<k;g++)h=a.b[g],-1===x(c,h)&&(d+=b(h)),c.push(h);return d}if(!a)return this.D;a=this.m(a);var c=[];return b(a)},ba:function(a){function b(a){var d=a.status in n?
1:0,g,k=a.b.length,h;for(g=0;g<k;g++)h=a.b[g],-1===x(c,h)&&(d+=b(h)),c.push(h);return d}a=a?this.m(a):this.I();var c=[];return b(a)},G:null,B:[],ea:function(a){this.B.push(a);this.G&&this.R()},R:function(){for(var a=0,b=this.B.length;a<b;a++)this.B[a].call(null,this.G.name||this.G.src);this.B.splice(0,this.B.length)},empty:function(){return 0===this.D},I:function(){if(this.c["<||page||>"])return this.c["<||page||>"];var a=new q("page","<||page||>");this.c["<||page||>"]=a;a.H();return a},ha:function(){var a,
b;for(a in this.c)if(b=this.c[a],b.a&&"interactive"===b.a.readyState)return b;return null},ga:function(){var a,b,c=u.currentScript;if(!c||!c.src)return null;for(a in this.c)if(b=this.c[a],b.a&&b.a===c)return b;return null},m:function(a){switch(h(a)){case "string":return this.c[a]||null;case "dependency":return this.c[a.src]?this.c[a.src].type===(a.type||"js")?this.c[a.src]:null:null;default:return null}},O:function(a){if(!this.m(a)){var b;switch(h(a)){case "string":b=new q(a,"js");b.H();this.c[a]=
b;break;case "dependency":this.c[a.src]=a}}this.D++;return this},V:function(a){switch(h(a)){case "string":return this.V(this.m(a));case "dependency":delete this.c[a.src],a.Z()}this.D--;return this},ka:function(a){"array"!==h(a,!0)&&(a=[a]);for(var b=a.length;b--;)switch(h(a[b],!0)){case "string":if(!this.c[a])return!1;break;case "object":if(!this.c[a.src])return!1}return!0},N:function(){var a,b;for(a=this.c.length;a--;)if(b=this.c[a].status,b in n)return!1;return!0}},I=[],H=!1,J=!1;M("dependency-failed",
function(a){l.G=a.Y;l.R()});var fa=0;d.da=function(a,b,c){2===arguments.length&&(c=b,b=a,a=null);K(b,c,a);return d};d.amd=d.da;d.f=function(a,b){v=!0;switch(h(a,!0)){case "function":a.call(k);break;default:d(a,b)}v=!1;return d};d.page=d.f;d.f.f=function(a,b){v=!0;switch(h(a,!0)){case "function":a.call(k);break;default:d.h(a,b)}v=!1;return d};d.f.css=d.f.f;d.f.h=function(a){if("function"!==typeof a)throw Error("callback must be a function");M("dependency-status-terminal",function(){a.call(null,l.ca(),
l.ba())})};d.f.progress=d.f.h;d.f.F=function(a){if("function"!==typeof a)throw Error("callback must be a function");l.ea(a)};d.f.failure=d.f.A;d.S=function(a){I.push(a);return d};d.ready=d.S;d.fa=function(a){O(a);return d};d.config=d.fa;d.F=function(a,b,c){a&&d(b,c);return d};d.conditionally=d.F;d.A=function(a,b){T.X(a,b);return d};d.alias=d.A;d.h=function(a,b){var c;switch(h(a,!0)){case "string":case "dependency":return d(C(a),b);case "array":for(c=a.length;c--;)a[c]=C(a[c]);return d(a,b);default:throw Error("Valid dependencies must be entered");
}};d.css=d.h;d.h.F=function(a,b,c){a&&d.h(b,c);return d};d.h.conditionally=d.h.F;d.h.A=function(a,b){return d.A(a,C(b))};d.h.alias=d.h.A;g.noConflict||(k.using=d);g.initialUsing&&d.f(g.initialUsing);g.initialStyleUsing&&d.f.f(g.initialStyleUsing);return d})();
